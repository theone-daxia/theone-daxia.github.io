[{"content":"目标 使用 GithubPages、Hugo 创建个人博客网站\n功能  正常博客写作 文章支持评论 网站数据分析  准备工作  拥有一个 github 账号 安装 hugo（ Hugo文档 ）  步骤 github 创建两个仓库  一个源码仓库，设置权限为 Private（用于对网站进行任何更改操作） 一个博客仓库，设置权限为 Public（用于对外展示，项目名称为：xxx.github.io，xxx为账户名称）  初始化源码项目  使用 hugo 生成网站  hugo new site quickstart 选择并添加一款心仪主题（ 主题选择 ）  # 此处以 Base16 主题为例 cd quickstart/themes git submodule add https://github.com/htdvisser/hugo-base16-theme.git base16 添加博客内容  hugo new blogs/my-first-blog.md 编辑配置文件 config.toml，配置主题及菜单  # 将下面内容添加进 config.toml（不包括本行） theme = \u0026quot;base16\u0026quot; [menu] [[menu.main]] name = \u0026quot;首页\u0026quot; url = \u0026quot;/\u0026quot; weight = 1 [[menu.main]] name = \u0026quot;博客\u0026quot; url = \u0026quot;/blog/\u0026quot; weight = 2 将 quickstart 目录里的内容 push 到源码项目，完成项目初始化  配置 CI/CD 可采用 hugo -D 来生成静态页面，然后同步到公开的博客仓库。 这样做不仅麻烦，也不符合极客精神，所以采用 GithubActions 来自动集成部署。\n配置步骤：\n  源码项目根目录下，添加 .github/workflows 文件夹\n  在刚创建的文件夹下创建 gh-pages.yml 文件（文件名随便写），写入如下代码\nname: github pages on: push: branches: - main # Set a branch to deploy pull_request: jobs: deploy: runs-on: ubuntu-20.04 steps: - uses: actions/checkout@v2 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: 'latest' # extended: true - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 if: github.ref == 'refs/heads/main' with: external_repository: xxx/xxx.github.io\t# 发布到哪个repo deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }} publish_dir: ./public\t# 注意这里指的是要发布哪个文件夹的内容，而不是指发布到目的仓库的什么位置，因为hugo默认生成静态网页到public文件夹，所以这里发布public文件夹里的内容 publish_branch: main\t# 发布到哪个branch  注： 此处的 ACTIONS_DEPLOY_KEY 需要在源码仓库中配置，具体步骤如下\n  生成一对新的 SSH Key sshkey-gen -t rsa\n  将 Public Key 添加到 xxx.github.io 仓库，setting -\u0026gt; Deploy Keys，变量名随便起。\n  将 Private Key 添加到源码仓库，setting -\u0026gt; Secrets，变量名取 ACTIONS_DEPLOY_KEY\n   另： Github Actions 的三种实现方案\n  github_token\n  deploy_key\n  personal_token\ngithub_token 适合 源码 和 public/ 存放在同一个仓库下的不同分支（比如源码在 main，public/ 内容在 gh-pages），指定部署到 gh-pages 分支即可。\ndeploy_key 适合 源码 和 public/ 存放在不同仓库下的模式（此为本文选择的方式）。\n    添加附加功能 文章支持评论 可选择 disqus、utteranc，由于 disqus 比较麻烦，得注册账号，好像还收费？所以选择 utteranc。\nutteranc 是一个免费的 GithubApp，可以在 Github 的 Marketplace 中获取，具体操作不再赘述。 下载后绑定到公开的博客仓库，然后在 layouts/partials/article.html 的合适位置添加如下代码\n{{ if .Site.Params.utteranc.enable }} \u0026lt;script src=\u0026quot;https://utteranc.es/client.js\u0026quot; repo=\u0026quot;{{ .Site.Params.utteranc.repo }}\u0026quot; issue-term=\u0026quot;{{ .Site.Params.utteranc.issueTerm }}\u0026quot; theme=\u0026quot;{{ .Site.Params.utteranc.theme }}\u0026quot; crossorigin=\u0026quot;anonymous\u0026quot; async\u0026gt; \u0026lt;/script\u0026gt; {{ end }} 在 config.toml 中添加如下配置\n[params.utteranc] enable = false repo = \u0026quot;xxx/xxx.github.io\u0026quot; issueTerm = \u0026quot;title\u0026quot; theme = \u0026quot;github-light\u0026quot; 由于最终显示效果不理想\n 个人感觉不好看，跟主题风格不搭 评论区域加载速度慢，进入文章几秒后才会出现 个人也不打算在博客文章里跟人交流  故将 utteranc.enable 置为 false，想启用的时候再说。\n添加谷歌分析 谷歌分析是由Google提供的个人免费的网站流量统计服务，支持查看实时流量，分析功能强大。网页和移动端均可查看（需要有vpn）\n使用步骤：\n  登陆谷歌分析（ 登陆地址 ），创建账号及媒体资源\n  在创建的媒体资源里，添加数据流（选择网站）\n 网站网址：填写博客仓库地址，即 xxx.github.io 数据流名称：自己命名    复制数据流的衡量ID（G-xxx），并将其添加进源码项目的 config.toml 中\ngoogleAnalytics = \u0026quot;G-xxx\u0026quot;   复制 themes/base16/layouts/partials/header.html 到 layouts/partials/header.html，然后在复制出来的 header.html 的 head 标签中添加如下代码\n\u0026lt;!-- 添加谷歌分析插件 Google Analytics --\u0026gt; {{ template \u0026quot;_internal/google_analytics.html\u0026quot; . }} 注：该 template 为 Hugo 附带的一个内部模板\n 如果不采用内部模板的写法，还可以将创建数据流时，提示的分析代码添加进 head 标签中，不过这种方法明显没有内部模板的方式优雅\n\u0026lt;!-- Global site tag (gtag.js) - Google Analytics --\u0026gt; \u0026lt;script async src=\u0026quot;https://www.googletagmanager.com/gtag/js?id=G-xxx\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-xxx'); \u0026lt;/script\u0026gt;   推到源码项目并自动部署后，访问博客，即可在谷歌分析的实时数据中看到统计信息\n  添加卜蒜子 卜蒜子 是一个静态页面计数服务，可显示 page_uv、page_pv、site_uv、site_pv 等数据（ 卜蒜子文档 ）。这里利用它给文章加上 page_uv。\n步骤：\n  在 layouts/partials/header.html 的 head 标签中添加如下代码\n\u0026lt;script async src=\u0026quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;   在 layouts/partials/article.html 的 Title 下面添加如下代码\n{{ if .Site.Params.busuanzi.enable }} \u0026lt;div style=\u0026quot;padding: 0 0 1em 0\u0026quot;\u0026gt; \u0026lt;span id=\u0026quot;busuanzi_container_page_pv\u0026quot;\u0026gt; \u0026lt;svg xmlns=\u0026quot;http://www.w3.org/2000/svg\u0026quot; width=\u0026quot;19\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 20 20\u0026quot; fill=\u0026quot;none\u0026quot; stroke=\u0026quot;currentColor\u0026quot; stroke-width=\u0026quot;2\u0026quot; stroke-linecap=\u0026quot;round\u0026quot; stroke-linejoin=\u0026quot;round\u0026quot; class=\u0026quot;feather feather-eye\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;circle cx=\u0026quot;12\u0026quot; cy=\u0026quot;12\u0026quot; r=\u0026quot;3\u0026quot;\u0026gt;\u0026lt;/circle\u0026gt;\u0026lt;/svg\u0026gt; \u0026lt;span id=\u0026quot;busuanzi_value_page_pv\u0026quot;\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt; \u0026lt;/div\u0026gt; {{ end }} 注：这个小眼睛的 svg 文件，是从 这里 下载的，感觉很好用。\n  在 config.toml 中添加如下配置\n[params.busuanzi] enable = true   推到源码项目并自动部署后，访问博客，即可在文章的标题下看到统计信息\n  ","permalink":"https://theone-daxia.github.io/blog/hugo_blog_site_record/","summary":"目标 使用 GithubPages、Hugo 创建个人博客网站\n功能  正常博客写作 文章支持评论 网站数据分析  准备工作  拥有一个 github 账号 安装 hugo（ Hugo文档 ）  步骤 github 创建两个仓库  一个源码仓库，设置权限为 Private（用于对网站进行任何更改操作） 一个博客仓库，设置权限为 Public（用于对外展示，项目名称为：xxx.github.io，xxx为账户名称）  初始化源码项目  使用 hugo 生成网站  hugo new site quickstart 选择并添加一款心仪主题（ 主题选择 ）  # 此处以 Base16 主题为例 cd quickstart/themes git submodule add https://github.com/htdvisser/hugo-base16-theme.git base16 添加博客内容  hugo new blogs/my-first-blog.md 编辑配置文件 config.toml，配置主题及菜单  # 将下面内容添加进 config.toml（不包括本行） theme = \u0026quot;base16\u0026quot; [menu] [[menu.main]] name = \u0026quot;首页\u0026quot; url = \u0026quot;/\u0026quot; weight = 1 [[menu.","title":"利用Hugo搭建静态博客网站记录"},{"content":"NRV 计算 在购买预包装食物时，对是否购买？每天该吃多少？等问题，可通过下面的计算进行快速决策 NRV 计算地址\n营养素参考值 ","permalink":"https://theone-daxia.github.io/blog/nrv/","summary":"NRV 计算 在购买预包装食物时，对是否购买？每天该吃多少？等问题，可通过下面的计算进行快速决策 NRV 计算地址\n营养素参考值 ","title":"营养素参考值"}]